{{define "title"}}Server List{{end}}

{{define "content"}}
<div class="row row-cols-1 row-cols-md-2 g-4">
  {{range .Servers}}
  <div class="col">
    <div class="card h-100 shadow-sm server-card position-relative">
      <div class="card-body">
        <h5 class="card-title d-flex justify-content-between align-items-center">
          <a href="/{{.Name}}" class="text-decoration-none text-dark stretched-link">{{.Name}}</a>
          <div>
            {{if eq .State "planned"}}<span class="badge bg-info text-dark me-1">Planned</span>{{end}}
            {{if eq .State "maintenance"}}<span class="badge bg-warning text-dark me-1">Maintenance</span>{{end}}
            {{if eq .State "offline"}}<span class="badge bg-secondary me-1">Offline</span>{{end}}
            <span class="badge bg-secondary">{{.Address}}</span>
          </div>
        </h5>
        <h6 class="card-subtitle mb-2 text-muted server-status-poller" data-server="{{.Name}}">
          Checking status...
        </h6>
        
        <!-- Configurable Tagline -->
        <p class="card-text">{{.Description | firstLine}}</p>
        
        <!-- Live MOTD (Less emphasis) -->
        {{if .ShowMOTD}}
        <p class="card-text small text-muted font-monospace border-start ps-2" style="display: none;" id="live-motd-{{.Name}}"></p>
        {{end}}

        <!-- Player List -->
        <div id="player-list-{{.Name}}" class="mb-3 small"></div>

        {{if .Metadata}}
        <div class="mb-3">
          {{range $k, $v := .Metadata}}
            <span class="badge bg-light text-dark border me-1 mb-1" title="{{$k}}">{{$k}}: {{$v}}</span>
          {{end}}
        </div>
        {{end}}

        <div class="d-grid gap-2 d-md-block position-relative" style="z-index: 2;">
          {{if .BlueMapURL}}
          <a href="/{{.Name}}/map/" target="_blank" class="btn btn-outline-primary">View Map</a>
          {{end}}
        </div>
      </div>
    </div>
  </div>
  {{end}}
</div>

{{end}}
